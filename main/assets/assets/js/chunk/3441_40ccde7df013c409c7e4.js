"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[3441],{"3441":function(e,n,a){a.r(n),a.d(n,{"taro_movable_view_core":function(){return l}});var h=a(7109),__generator=function(e,n){var a,h,l,u,f={"label":0,"sent":function sent(){if(1&l[0])throw l[1];return l[1]},"trys":[],"ops":[]};return u={"next":o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(e){return function(n){return c([e,n])}}function c(u){if(a)throw new TypeError("Generator is already executing.");for(;f;)try{if(a=1,h&&(l=2&u[0]?h.return:u[0]?h.throw||((l=h.return)&&l.call(h),0):h.next)&&!(l=l.call(h,u[1])).done)return l;switch(h=0,l&&(u=[2&u[0],l.value]),u[0]){case 0:case 1:l=u;break;case 4:return f.label++,{"value":u[1],"done":!1};case 5:f.label++,h=u[1],u=[0];continue;case 7:u=f.ops.pop(),f.trys.pop();continue;default:if(!(l=f.trys,(l=l.length>0&&l[l.length-1])||6!==u[0]&&2!==u[0])){f=0;continue}if(3===u[0]&&(!l||u[1]>l[0]&&u[1]<l[3])){f.label=u[1];break}if(6===u[0]&&f.label<l[1]){f.label=l[1],l=u;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(u);break}l[2]&&f.ops.pop(),f.trys.pop();continue}u=n.call(e,f)}catch(e){u=[6,e],h=0}finally{a=l=0}if(5&u[0])throw u[1];return{"value":u[0]?u[1]:void 0,"done":!0}}},__awaiter=function(e,n,a,h){function i(e){return e instanceof a?e:new a((function(n){n(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{c(h.next(e))}catch(e){l(e)}}function o(e){try{c(h.throw(e))}catch(e){l(e)}}function c(e){e.done?a(e.value):i(e.value).then(s,o)}c((h=h.apply(e,n||[])).next())}))},l=function(){function t(e){var n=this;(0,h.r)(this,e),this.onChange=(0,h.c)(this,"change",7),this.onScale=(0,h.c)(this,"scale",7),this.onHTouchMove=(0,h.c)(this,"htouchmove",7),this.onVTouchMove=(0,h.c)(this,"vtouchmove",7),this.x=0,this.y=0,this.direction="none",this.outOfBounds=!1,this.inertia=!1,this.friction=2,this.damping=20,this.disabled=!1,this.scale=!1,this.scaleMin=.5,this.scaleMax=10,this.scaleValue=1,this.animation=!0,this.translateX=0,this.translateY=0,this.origin={"x":0,"y":0},this.area={"width":0,"height":0},this.originScale=1,this.currentScale=1,this.width=0,this.height=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.baseX=0,this.baseY=0,this.offset={"x":0,"y":0},this.scaleOffset={"x":0,"y":0},this.getLimitXY=function(e,a){var h=!1;return e>n.maxX?(e=n.maxX,h=!0):e<n.minX&&(e=n.minX,h=!0),a>n.maxY?(a=n.maxY,h=!0):a<n.minY&&(a=n.minY,h=!0),{"x":e,"y":a,"outOfBounds":h}},this.animationTo=function(e,a,h,l,u,f,d){n.animation?(n.setTransform(e,a,h,l,u,f),null==d||d()):n.setTransform(e,a,h,l,u,f)},this.setTransform=function(e,a,h,l,u,f){if(e=Number(e.toFixed(1)),a=Number(a.toFixed(1)),h=Number((null!=h?h:n.currentScale).toFixed(3)),!n.outOfBounds){var d=n.getLimitXY(e,a);e=d.x,a=d.y}var p=function c(e,n){return+((1e3*e-1e3*n)/1e3).toFixed(1)},m=p(e,n.scaleOffset.x),v=p(a,n.scaleOffset.y);n.translateX===e&&n.translateY===a||!u&&n.onChange.emit({"x":m,"y":v,"source":l}),h!==n.currentScale&&f&&n.onScale.emit({"scale":h,"x":m,"y":v});var y="translateX("+e+"px) translateY("+a+"px) translateZ(0px) scale("+h+")";n.element.style.transform=y,n.element.style.webkitTransform=y,n.translateX=e,n.translateY=a,n.currentScale=h},this.updateOffset=function(){if(n.parent){var e=function t(e,n){if(e===n||!e.offsetParent)return{"left":0,"top":0};var a=t(e.offsetParent,n);return{"left":e.offsetLeft+a.left,"top":e.offsetTop+a.top}}(n.element,n.parent);n.offset.x=e.left,n.offset.y=e.top}},this.updateScaleOffset=function(e){void 0===e&&(e=n.currentScale);var a=n.element.getBoundingClientRect();n.height=a.height/n.currentScale,n.width=a.width/n.currentScale,n.scaleOffset.x=(n.width*e-n.width)/2,n.scaleOffset.y=(n.height*e-n.height)/2},this.updateBoundary=function(){var e=0-n.offset.x+n.scaleOffset.x,a=n.area.width-n.width-n.offset.x-n.scaleOffset.x;n.minX=Math.min(e,a),n.maxX=Math.max(e,a);var h=0-n.offset.y+n.scaleOffset.y,l=n.area.height-n.height-n.offset.y-n.scaleOffset.y;n.minY=Math.min(h,l),n.maxY=Math.max(h,l)},this.updateScale=function(e,a,h){if(n.scale){var l=n.adjustScale(e);n.updateScaleOffset(l),n.updateBoundary();var u=n.getLimitXY(n.translateX,n.translateY),f=u.x,d=u.y;a?n.animationTo(f,d,l,"",!0,!0,h):n.updating||(n.updating=!0,requestAnimationFrame((function(){n.setTransform(f,d,l,"",!0,!0),n.updating=!1})))}},this.setOriginScale=function(e){n.originScale=e},this.adjustScale=function(e){return Math.min(10,n.scaleMax,Math.max(.5,n.scaleMin,e))},this.handleTouchStart=function(e){var a=e.touches;if(!(n.disabled||a.length>1)&&n.element){var h=a[0];n.touching=!0,n.firstMoveFireEvent=!1,n.origin.x=h.screenX,n.origin.y=h.screenY,n.baseX=n.translateX,n.baseY=n.translateY,n.element.style.willChange="transform"}},this.handleTouchMove=function(e){var a=e.touches;if(!(n.disabled||!n.element||n.scaling||!n.touching||a.length>1)){e.preventDefault();var h=a[0],l=h.screenX-n.origin.x,u=h.screenY-n.origin.y;if(n.setTransform(n.xMove?l+n.baseX:0,n.yMove?u+n.baseY:0),!n.firstMoveFireEvent)n.firstMoveFireEvent=!0,(Math.abs(l)>Math.abs(u)?n.onHTouchMove:n.onVTouchMove).emit({"originalEvent":e,"bubbles":!1,"capturePhase":!1,"composed":!0,"extraFields":{"touches":e.touches||{},"changedTouches":e.changedTouches||{}}})}},this.handleTouchEnd=function(e){var a=e.changedTouches[0];if(!n.disabled&&n.touching&&a){n.touching=!1;var h=a.screenX-n.origin.x,l=a.screenY-n.origin.y;n.setTransform(n.xMove?h+n.baseX:0,n.yMove?l+n.baseY:0)}}}return t.prototype.watchX=function(e){this.setTransform(parseFloat(""+(e||0)),this.translateY)},t.prototype.watchY=function(e){this.setTransform(this.translateX,parseFloat(""+(e||0)))},t.prototype.watchScaleMinOrMax=function(){if(!this.scale)return!1;this.updateScale(this.currentScale,!0),this.setOriginScale(this.currentScale)},t.prototype.watchScaleValue=function(e){return!!this.scale&&(this.updateScale(e,!0),this.setOriginScale(e),e)},t.prototype.setParent=function(e){var n=e.element,a=e.area;return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(h){return e=this.scale?this.scaleValue:1,this.area=a,this.parent=n,this.updateOffset(),this.updateScaleOffset(e),this.updateBoundary(),this.setTransform(Number(this.x)+this.scaleOffset.x,Number(this.y)+this.scaleOffset.y,e,"",!0),this.setOriginScale(e),[2]}))}))},t.prototype.endScale=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.scaling=!1,this.setOriginScale(this.currentScale),[2]}))}))},t.prototype.setScale=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return this.scale?(this.scaling=!0,this.updateScale(e*this.originScale),[2]):[2]}))}))},t.prototype.connectedCallback=function(){var e=this;this.observer=new MutationObserver((function(n){n.forEach((function(n){var a=n.attributeName;if(a&&["class","style"].includes(a)){var h=n.oldValue,l=n.target.getAttribute(a);if(h===l)return;var u=function r(e){return null==e?void 0:e.split(";").filter((function(e){return!["transform","will-change"].find((function(n){return e.trim().startsWith(n)}))})).join(";")};if("style"===a&&u(l)===u(h))return;e.updateOffset(),e.updateScaleOffset(),e.updateBoundary(),e.setTransform(e.translateX,e.translateY)}}))})),this.observer.observe(this.element,{"attributes":!0,"attributeOldValue":!0})},t.prototype.disconnectedCallback=function(){var e;null===(e=this.observer)||void 0===e||e.disconnect()},t.prototype.componentDidLoad=function(){if(this.element.style.transformOrigin="center",this.xMove=["horizontal","all"].includes(this.direction),this.yMove=["vertical","all"].includes(this.direction),this.friction<=0&&(this.friction=2),this.x||this.y){var e=parseFloat(""+(this.x||0)),n=parseFloat(""+(this.y||0));this.setTransform(e,n)}},t.prototype.render=function(){return(0,h.h)(h.H,{"onTouchStart":this.handleTouchStart,"onTouchMove":this.handleTouchMove,"onTouchEnd":this.handleTouchEnd})},Object.defineProperty(t.prototype,"element",{"get":function get(){return(0,h.g)(this)},"enumerable":!1,"configurable":!0}),Object.defineProperty(t,"watchers",{"get":function get(){return{"x":["watchX"],"y":["watchY"],"scaleMin":["watchScaleMinOrMax"],"scaleMax":["watchScaleMinOrMax"],"scaleValue":["watchScaleValue"]}},"enumerable":!1,"configurable":!0}),t}();l.style="taro-movable-view-core{display:inline-block;position:absolute;left:0;top:0;width:10px;height:10px}"}}]);